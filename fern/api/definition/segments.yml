# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml
  constraints: constraints.yml

services:
  http:
    SegmentsService:
      base-path: /segments
      auth: true
      endpoints:
        list:
          path: /
          method: GET
          query-parameters:
            limit: integer
            offset: integer
            pageToken: string
          response: fliptSegmentList

        create:
          path: /
          method: POST
          request: fliptCreateSegmentRequest
          response: fliptSegment

        get:
          path: /{key}
          method: GET
          path-parameters:
            key: string
          response: fliptSegment

        delete:
          path: /{key}
          method: DELETE
          path-parameters:
            key: string

        update:
          path: /{key}
          method: PUT
          path-parameters:
            key: string
          request: fliptUpdateSegmentRequest
          response: fliptSegment

types:
  fliptSegmentList:
    extends: commons.Pageable
    properties:
      segments: list<fliptSegment>

  fliptSegment:
    properties:
      key: string
      name: string
      description: string
      createdAt: datetime
      updatedAt: datetime
      constraints: list<constraints.fliptConstraint>
      matchType: fliptMatchType

  fliptMatchType:
    enum:
      - ALL_MATCH_TYPE
      - ANY_MATCH_TYPE

  fliptCreateSegmentRequest:
    properties:
      key: string
      name: string
      description: string
      matchType: fliptMatchType

  fliptUpdateSegmentRequest:
    properties:
      name: string
      description: string
      matchType: fliptMatchType
