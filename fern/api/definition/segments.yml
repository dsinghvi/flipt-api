# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml
  constraints: constraints.yml

services:
  http:
    SegmentsService:
      base-path: /segments 
      auth: true 
      endpoints: 
        list: 
          method: GET 
          path: /
          query-parameters:
            limit: integer 
            offset: integer
            pageToken: string 
          response: fliptSegmentList
        
        create: 
          method: POST 
          path: /
          request: fliptCreateSegmentRequest
          response: fliptSegment

        get: 
          method: GET 
          path: /{key}
          path-parameters:
            key: string
          response: fliptSegment

        delete: 
          method: DELETE 
          path: /{key}
          path-parameters:
            key: string
          
        update: 
          method: PUT 
          path: /{key}
          path-parameters:
            key: string
          request: fliptUpdateSegmentRequest
          response: fliptSegment
        
types:
  fliptSegmentList:
    extends: commons.Pageable
    properties:
      segments: list<fliptSegment>

  fliptSegment: 
    properties:
      key: string 
      name: string 
      description: string 
      createdAt: datetime 
      updatedAt: datetime 
      constraints: list<constraints.fliptConstraint>
      matchType: fliptMatchType
      
  fliptMatchType: 
    enum:
      - ALL_MATCH_TYPE
      - ANY_MATCH_TYPE
  
  fliptCreateSegmentRequest:
    properties:
      key: string 
      name: string 
      description: string 
      matchType: fliptMatchType 

  fliptUpdateSegmentRequest: 
    properties:
      name: string 
      description: string 
      matchType: fliptMatchType